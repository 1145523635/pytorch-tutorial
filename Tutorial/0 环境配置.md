## 环境配置

**温馨提示：为了更好的教程体验，提供视频、阅读地址**
Youtube:
BiliBili:
Github: 
在学习中，遇到任何问题，可以关注公众号：土堆碎念，直接在对话框中留言，我会不定时解答的~
**公众号：土堆碎念，回复：pytorch，即可获得所有的数据集及安装包，**省去找软件、数据集的时间。（同步更新中，请勿急躁）

### 0. 前言

在计算机领域学习，最烦的一件事，就是安装软件，环境配置。而且，恰恰不如意的是，它还是你学习进程的第一关。第一关就出现大Boss。这样，超级容易打击学习的动力。

所以，在我看来，入门的话，一定要快，要不求甚解，先把握整体。所以，我的教程**安排顺序**和**一些方法**，不同于其他千篇一律的教程，其中也许有自己的想法。

如果你在学习中，有什么建议，或者遇到什么问题，可以关注公众号：土堆碎念，直接留言，私信我。

### 1. Anaconda 下载

在机器学习，深度学习中，要用到大量的 package（就是各种工具包）。如果说，函数是一个工具，那么 package 就是一个工具包。一个个安装 package 很麻烦，而且容易出现疏漏。于是，就有了 Anaconda，这是一个集成了常用于科学分析（机器学习，深度学习）的大量package。

**也就是说，你只要安装了 Anaconda，就安装了很多我们之后要用的许多packages。**（他还有很多功能，对入门帮助超大，后面再说）

![](https://pic.superbed.cn/item/5dbac559bd461d945a86663a.png)

Anaconda 的下载地址：[这儿]( https://www.anaconda.com/distribution/ )（目前，页面上是 Python3.7 的版本，我用的是3.6版本，**推荐3.6版本**）

之前使用过3.7版本，也许会遇到一些问题。

**推荐：**Anaconda历史版本链接：[这儿]( https://repo.continuum.io/archive/ )，选择这个版本： Anaconda 3-5.2.0

![](https://pic.superbed.cn/item/5dbac43cbd461d945a86368a.png)

### 2. Anaconda 安装

双击进行安装，需要注意以下几点：

**（1）记住安装路径，之后会用到**

![](https://pic.superbed.cn/item/5dbac5cebd461d945a86794f.png)



**（2）跳过安装 Microsoft VSCode**

![](https://pic.superbed.cn/item/5dbac679bd461d945a868bad.png)

为了检验是否安装成功，在开始菜单出，**左击 Anaconda Prompt**

![](https://pic.superbed.cn/item/5dbac6c4bd461d945a8693d1.png)

如果可以成功打开，且左边有 (base)，即安装成功。

![](https://pic.superbed.cn/item/5dbac72ebd461d945a869f93.png)

### 3. 显卡配置（无 Nvidia 显卡的略过）

不得不说，PyTorch 在这方面做的真的好，不需要再人工安装 CUDA、cuDNN 之类的，全部都给你解决了。真的良心~以前安装真的繁琐。（吐槽一句，以前超麻烦的）

只要你打开任务管理器，在 GPU 那里看到了你的 NVIDIA 显卡，即可。说明你的硬件驱动，已安装。

如果你的 NVIDIA 显卡未显示，可以使用驱动人生，或者去[官网](  https://www.nvidia.cn/Download/index.aspx?lang=cn  )下载驱动。

![](https://pic.superbed.cn/item/5dbac97dbd461d945a86c899.png)

### 4. 有序的管理环境

也许，你之后会遇到不同的项目，需要使用到不同版本的环境。比如这个项目要用到 pytorch 0.4，另一个项目要用到 pytorch 1.0，如果你卸载了0.4版本，安装了1.0版本。那么下一次，你再碰到0.4版本，你就需要卸载1.0版本，安装0.4版本。很折腾。

Anaconda 集成的 conda 包就能够解决这个问题。它可以创造出两个屋子，相互隔离。一个屋子放 0.4 版本，一个屋子放 1.0 版本。你需要哪个版本，就进哪个屋子工作。

我们首先使用 conda 指令创建一个屋子，叫做 pytorch。

指令如下：

```
conda create -n pytorch python=3.6
```
conda 是指调用 conda 包，create 是创建的意思，-n 是指后面的名字是屋子的名字， pytorch是屋子的名字（可以更改成自己喜欢的），python=3.6 是指创建的屋子，是 python3.6 版本。

![](https://pic.superbed.cn/item/5dbacec6bd461d945a87395f.png)

之后，弹出提示，输入 y，即可安装。

安装成功后，输入以下指令：

```
conda info --envs
```

即可看到 conda 环境中，有新建的 pytorch 环境，右边的 * 号表示，当前你处于哪个环境。

![](https://pic.superbed.cn/item/5dbad001bd461d945a87470c.png)

接下来，我们要在 pytorch 环境中，安装 PyTorch，（有点绕），使用如下指令，进入 pytorch 环境。

```
conda activate pytorch
```

你可以看到左边的 base 变成了 pytorch，代表成功进入 pytorch 环境。

![](https://pic.superbed.cn/item/5dbad08ebd461d945a874e96.png)

### 5. 安装 PyTorch 准备

终于到重头戏了，安装 PyTorch了。激动的打开[官网]( https://pytorch.org/ )，下拉到下面的页面。

PyTorch Build 选择 Stable；选择系统；Package，Windows下推荐 conda，Linux 下推荐 pip，Python版本按照Anaconda的版本选择，我这里选择3.6，CUDA 推荐9.2。如果没有显卡的话，选择 None。我的选择如图所示：

![](https://pic.superbed.cn/item/5dbacbfabd461d945a86e9cb.png)

复制下面的代码，之后，在开始菜单中，打开 Anaconda Prompt，粘贴即可。

![](https://pic.superbed.cn/item/5dbad0d2bd461d945a875203.png)

果断输入y，之后就是漫长的等待。或者去休息吧，慢慢等着。看看剧啥的，等着它慢慢下吧。如果你的并不慢，恭喜恭喜。

慢的同学，跟我继续走

![](https://pic.superbed.cn/item/5dbad416bd461d945a8782f9.png)

### 6.下载加速（可选）

如果速度实在太慢了，在 Anaconda Prompt 中，按下 Ctrl + C，可以多按几下，强制停止。

下载主要慢的原因是：PyTorch 服务器在国外，而且主要是 cuda9.2 慢，国内的清华镜像好像没有这个，所以好像无法加速。

这就需要我们手动下载 cuda 了。

下载地址：[这儿]( https://developer.nvidia.com/cuda-toolkit-archive )

![](https://pic.superbed.cn/item/5dbad6fcbd461d945a87a9e7.png)

我选择 在线安装，这种方式好像快点。下载好，双击安装。

![](https://pic.superbed.cn/item/5dbad7f2bd461d945a87b880.png)

一直按默认选项，下一步。

接下来，需要添加清华镜像来加速。复制下面代码（适用于Windows)，直接在窗口粘贴，回车。

```
conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/free/
conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/main/
conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud/conda-forge/
conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud/peterjc123/
conda config --set show_channel_urls yes
```

下面的适用于 Linux

```
conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/free/
conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/main/
conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud/conda-forge/
conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud/pytorch/

conda config --set show_channel_urls yes
```

之后，将 PyTorch 官网上的安装代码，再次复制粘贴。（或者在窗口，按↑键），找到那个命令，回车。

加速飞起。

